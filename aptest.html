<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroid Lookup</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Asteroid Lookup</h1>
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="mb-3">
                    <label for="asteroidId" class="form-label">Enter Asteroid SPK-ID</label>
                    <input type="text" id="asteroidId" class="form-control" placeholder="e.g. 3542519">
                </div>
                <button class="btn btn-primary" id="lookupButton">Look Up Asteroid</button>
                <div id="asteroidInfo" class="mt-4"></div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (Optional) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        document.getElementById('lookupButton').addEventListener('click', function() {
            const asteroidId = document.getElementById('asteroidId').value.trim();
            if (asteroidId) {
                fetchAsteroidData(asteroidId);
            } else {
                alert('Please enter an asteroid ID');
            }
        });

        async function fetchAsteroidData(asteroidId) {
            const apiKey = 'DEMO_KEY';  // Use your own API key if needed
            const url = `https://api.nasa.gov/neo/rest/v1/neo/${asteroidId}?api_key=${apiKey}`;
            try {
                const response = await fetch(url);
                const data = await response.json();

                if (data.error) {
                    displayError(data.error.message);
                } else {
                    displayAsteroidInfo(data);
                }
            } catch (error) {
                displayError('An error occurred while fetching the data.');
            }
        }

        function displayAsteroidInfo(data) {
            const asteroidInfoDiv = document.getElementById('asteroidInfo');
            asteroidInfoDiv.innerHTML = `
                <h3>Asteroid: ${data.name} (${data.id})</h3>
                <p><strong>NASA JPL URL:</strong> <a href="${data.nasa_jpl_url}" target="_blank">${data.nasa_jpl_url}</a></p>
                <p><strong>Estimated Diameter:</strong> 
                    Min: ${data.estimated_diameter.kilometers.estimated_diameter_min.toFixed(2)} km, 
                    Max: ${data.estimated_diameter.kilometers.estimated_diameter_max.toFixed(2)} km
                </p>
                <p><strong>Potentially Hazardous:</strong> ${data.is_potentially_hazardous_asteroid ? 'Yes' : 'No'}</p>
                <h4>Close Approach Data:</h4>
                <ul>
                    ${data.close_approach_data.map(cad => `
                        <li>
                            <strong>Date:</strong> ${cad.close_approach_date} 
                            <br><strong>Miss Distance:</strong> ${cad.miss_distance.kilometers} km
                        </li>
                    `).join('')}
                </ul>
            `;
        }

        function displayError(message) {
            const asteroidInfoDiv = document.getElementById('asteroidInfo');
            asteroidInfoDiv.innerHTML = `<div class="alert alert-danger">${message}</div>`;
        }
    </script>
</body>
</html>
