<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Final Testing</title>

  <!-- Link to Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: black;
      color: white;
    }

    /* Optional: Custom styling for the image */
    .apod-image {
      width: 100%;
      height: auto;
    }

    .container {
      margin-top: 30px;
    }

    .topnav {
      background-color: #333;
      overflow: hidden;
    }

    /* Style the links inside the navigation bar */
    .topnav a {
      float: left;
      color: #f2f2f2;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
    }

    /* Change the color of links on hover */
    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }

    /* Add a color to the active/current link */
    .topnav a.active {
      background-color: #04AA6D;
      color: white;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="text-center">NASA Astronomy Picture of the Day</h1>
    
    <!-- Placeholder for image and description -->
    <div class="row">
      <div class="col-md-8">
        <img id="apodImage" class="apod-image" src="" alt="NASA APOD" />
      </div>
      <div class="col-md-4">
        <h3 id="apodTitle"></h3>
        <p id="apodDescription"></p>
      </div>
    </div>
  </div>

  <!-- JavaScript for fetching and displaying data -->
  <script>
    // API URL
    const apiUrl = 'https://api.nasa.gov/planetary/apod?api_key=5SWTFk7snJWBtWQZESAmhtE5llEtAfbiBkcX49RD';

    // Fetch the data from the API
    fetch(apiUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.json();
      })
      .then(data => {
        // Log the data to check what is returned from the API
        console.log(data); 

        // Check if media_type is 'image' and handle accordingly
        if (data.media_type === 'image') {
          const imageElement = document.getElementById('apodImage');
          const titleElement = document.getElementById('apodTitle');
          const descriptionElement = document.getElementById('apodDescription');

          // Set the content dynamically
          imageElement.src = data.url;  // Set the image URL
          titleElement.textContent = data.title;  // Set the title
          descriptionElement.textContent = data.explanation;  // Set the explanation
        } else {
          // Handle non-image media types (e.g., video)
          console.error("The returned media is not an image:", data);
        }
      })
      .catch(error => {
        console.error('Error fetching the APOD data:', error);
        // Display fallback message if there is an error
        const imageElement = document.getElementById('apodImage');
        const titleElement = document.getElementById('apodTitle');
        const descriptionElement = document.getElementById('apodDescription');
        
        imageElement.src = '';  // Clear the image
        titleElement.textContent = 'Failed to load the image';
        descriptionElement.textContent = 'There was an issue fetching the image or data. Please try again later.';
      });
  </script>

  <div class="container">
    <div class="row">
      <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
        <div class="card bg-dark text-white p-3">
          <img src="https://media.istockphoto.com/id/1367810652/photo/meteor-impact-on-earth-fired-asteroid-in-collision-with-planet-contain-3d-rendering-elements.jpg?s=612x612&w=0&k=20&c=f48HSAwMLHMPIe70NUf4tCV_bd-ZcLEZfhfh7Y4iCGA=" 
               class="card-img-top" 
               alt="Asteriod Image">
          <div class="card-body">
            <h5 class="card-title">Asteroids Near Earth</h5>
            <a href="https://alanreyes77.github.io/aptest.html" class="card-link"> 
              <p class="card-text">NASA has a wonderful part where you can see near-earth objects.</p>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Link to Bootstrap JS (optional, for certain Bootstrap components) -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

</body>
</html>
